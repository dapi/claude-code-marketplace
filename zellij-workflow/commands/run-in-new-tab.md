---
description: Run Claude session in new zellij tab with given instructions
argument-hint: <instructions or plan-file-path>
---

# Run in New Tab

Launch an interactive Claude Code session in a new zellij tab.

## Input

- **INSTRUCTIONS**: `$ARGUMENTS` -- prompt text or path to a plan file

## Steps

### 1. Determine tab name and prompt

If `$ARGUMENTS` is a file path (ends with `.md`), the prompt should be:
```
Execute the plan from <plan-file-path>. Use superpowers:executing-plans.
```
Otherwise use `$ARGUMENTS` directly as the prompt.

Generate a short tab name (1-2 words) from the content.
Fallback: `claude-<HH:MM>`.

### 2. Write prompt to temp file

```bash
PROMPT_FILE=$(mktemp /tmp/claude-tab-XXXXXX.md)
echo "<prompt>" > "$PROMPT_FILE"
```

### 3. Create tab and launch claude

```bash
PROJECT_DIR=$(pwd)
TAB_NAME="<auto-generated>"

# EAFP: execute directly, diagnose on failure
timeout 5 zellij action new-tab --name "$TAB_NAME" && \
timeout 5 zellij action write-chars "cd '$PROJECT_DIR' && PROMPT=\$(cat '$PROMPT_FILE') && rm '$PROMPT_FILE' && claude --dangerously-skip-permissions \"\$PROMPT\"
" || {
  echo "Command failed. Diagnosing..."
  if [ -z "$ZELLIJ" ]; then echo "Not in zellij session"
  elif [ $? -eq 124 ]; then echo "Timed out -- zellij may be hanging"
  elif ! command -v claude &>/dev/null; then echo "claude not found in PATH"
  else echo "Unknown error"
  fi
}
```

**In a new pane (alternative):**

```bash
timeout 5 zellij run -- bash -c "cd '$PROJECT_DIR' && PROMPT=\$(cat '$PROMPT_FILE') && rm '$PROMPT_FILE' && exec claude --dangerously-skip-permissions \"\$PROMPT\""
```

## Examples

```bash
/run-in-new-tab Execute plan from docs/plans/skill-audit-plan.md. Use executing-plans.
/run-in-new-tab Refactor auth module following DRY principles
/run-in-new-tab Fix all failing tests in spec-reviewer plugin
```

## Result

- New zellij tab created with auto-generated name
- Interactive Claude Code session running with the given instructions
- Session remains a working chat after initial prompt
