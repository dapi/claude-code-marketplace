---
description: Run Claude session in new zellij tab with given instructions
argument-hint: <instructions or plan-file-path>
---

# Run in New Tab

Launch an interactive Claude Code session in a new zellij tab.

## Input

- **INSTRUCTIONS**: `$ARGUMENTS` -- prompt text or path to a plan file

## Steps

### 1. Check environment

```bash
if [ -z "$ZELLIJ" ]; then
  echo "[FAIL] Not in zellij session. Run zellij first."
  exit 1
fi

if ! command -v claude &>/dev/null; then
  echo "[FAIL] claude not found in PATH. Install Claude Code CLI."
  exit 1
fi
```

**If any check fails** -- inform user and DO NOT continue.

### 2. Determine tab name and prompt

If `$ARGUMENTS` is a file path (ends with `.md`), the prompt should be:
```
Execute the plan from <plan-file-path>. Use superpowers:executing-plans.
```
Otherwise use `$ARGUMENTS` directly as the prompt.

Generate a short tab name (1-2 words) from the content.
Fallback: `claude-<HH:MM>`.

**Handle tab name collisions:**
```bash
EXISTING=$(zellij action query-tab-names 2>/dev/null || true)
if echo "$EXISTING" | grep -qx "$TAB_NAME"; then
  N=2; while echo "$EXISTING" | grep -qx "${TAB_NAME}-${N}"; do N=$((N+1)); done
  TAB_NAME="${TAB_NAME}-${N}"
fi
```

### 3. Write prompt to temp file

```bash
PROMPT_FILE=$(mktemp /tmp/claude-tab-XXXXXX.md)
echo "<prompt>" > "$PROMPT_FILE"
```

### 4. Create tab and launch claude

```bash
PROJECT_DIR=$(pwd)
TAB_NAME="<auto-generated>"

zellij action go-to-tab-name --create "$TAB_NAME" && \
zellij action new-pane -- bash -c \
  "cd '$PROJECT_DIR' && PROMPT=\$(cat '$PROMPT_FILE') && rm '$PROMPT_FILE' && claude \"\$PROMPT\"" && \
zellij action focus-previous-pane && \
zellij action close-pane
```

## Examples

```bash
/run-in-new-tab Execute plan from docs/plans/skill-audit-plan.md. Use executing-plans.
/run-in-new-tab Refactor auth module following DRY principles
/run-in-new-tab Fix all failing tests in spec-reviewer plugin
```

## Result

- New zellij tab created with auto-generated name
- Interactive Claude Code session running with the given instructions
- Session remains a working chat after initial prompt
