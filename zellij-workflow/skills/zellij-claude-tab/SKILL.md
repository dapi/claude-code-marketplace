---
name: zellij-claude-tab
description: |
  **UNIVERSAL TRIGGER**: EXECUTE/RUN/LAUNCH Claude session with instructions IN separate zellij TAB.

  Common patterns:
  - "execute/run/launch [task/plan] in new tab"
  - "start claude session in new tab with [instructions]"
  - "выполни/запусти [задачу] в новой вкладке zellij"

  **Execute Plan/Task**:
  - "run this plan in a new zellij tab"
  - "execute plan from docs/plans/... in separate tab"
  - "launch this task in new tab", "start in parallel tab"
  - "выполни план в отдельной вкладке"

  **Start Session**:
  - "open claude session in new tab"
  - "start new claude in zellij tab with these instructions"
  - "create tab and run claude with prompt"
  - "открой сессию claude в новой вкладке"

  **Delegate Work**:
  - "delegate this to a new tab"
  - "run this in background tab", "parallel session for this"
  - "send to new tab", "offload to separate tab"
  - "запусти в параллельной вкладке"

  TRIGGERS: run in new tab, execute in tab, launch in tab, new tab claude,
  claude session tab, zellij claude tab, parallel tab, delegate to tab,
  start session tab, run plan tab, execute plan tab, separate session,
  выполни в вкладке, запусти в вкладке, новая вкладка, сессия в вкладке,
  параллельная сессия, отдельная вкладка, делегируй в вкладку
allowed-tools: Bash
---

# Zellij Claude Tab Skill

Launch an interactive Claude Code session in a separate zellij tab with arbitrary instructions.
The session remains a working chat after processing the initial prompt.

## How It Works

1. Claude receives instructions to execute in a new tab
2. Generates a short tab name from context (e.g. `plan-audit`, `#123`, `refactor`)
3. Writes a bash launch script to /tmp (handles cd, clear, message, exec claude)
4. Creates zellij tab and types `bash /tmp/script.sh` -- works in any shell (fish, bash, zsh)

## Execution Steps

### Step 1: Determine tab name

Auto-generate a short name (1-2 words, max 20 chars) from the instruction context:
- Has issue reference -> `#123`
- Has plan file -> `plan-audit`
- General task -> `refactor`, `fix-tests`, etc.
- Fallback -> `claude-<HH:MM>` (e.g. `claude-14:35`)

### Step 2: Write bash launch script

```bash
SCRIPT=$(mktemp /tmp/claude-tab-XXXXXX.sh)
cat > "$SCRIPT" << 'SCRIPT_EOF'
#!/bin/bash
cd '<PROJECT_DIR>'
PROMPT='<escaped prompt -- single quotes escaped as '"'"'>'
clear
echo "Launching claude with prompt: $PROMPT"
echo ""
exec claude --dangerously-skip-permissions "$PROMPT"
SCRIPT_EOF
chmod +x "$SCRIPT"
```

**Why a script instead of inline commands:**
- `write-chars` types into the new tab's shell, which may be fish, bash, or zsh
- Inline bash syntax like `PROMPT=$(cat ...)` breaks in fish
- `bash /tmp/script.sh` works in **any** shell

### Step 3: Create tab and run script

```bash
TAB_NAME="<auto-generated>"

# EAFP: execute directly, diagnose on failure
zellij action new-tab --name "$TAB_NAME" && \
sleep 0.3 && \
zellij action write-chars "bash '$SCRIPT'
" || {
  echo "Command failed. Diagnosing..."
  if [ -z "$ZELLIJ" ]; then echo "Not in zellij session"
  elif ! command -v claude &>/dev/null; then echo "claude not found in PATH"
  else echo "Unknown error"
  fi
}
```

**How it works:**
1. `new-tab --name` -- creates tab with given name
2. `sleep 0.3` -- wait for shell to initialize in new tab
3. `write-chars "bash '$SCRIPT'\n"` -- types `bash /tmp/script.sh` + Enter into new tab
4. The script clears screen, shows prompt message, then `exec claude` starts **interactive** session

## Examples

### Example 1: Execute a plan

**User:** "Execute the plan from docs/plans/skill-audit-plan.md in a new zellij tab"

**Claude runs:**
```bash
SCRIPT=$(mktemp /tmp/claude-tab-XXXXXX.sh)
cat > "$SCRIPT" << 'SCRIPT_EOF'
#!/bin/bash
cd '/home/danil/code/claude-code-marketplace'
PROMPT='Execute the plan from docs/plans/2026-02-14-skill-audit-plan.md for issue #20. Use superpowers:executing-plans.'
clear
echo "Launching claude with prompt: $PROMPT"
echo ""
exec claude --dangerously-skip-permissions "$PROMPT"
SCRIPT_EOF
chmod +x "$SCRIPT"

zellij action new-tab --name "plan-audit" && \
sleep 0.3 && \
zellij action write-chars "bash '$SCRIPT'
"
```

### Example 2: Arbitrary task

**User:** "Run refactoring of the auth module in a separate tab"

**Claude generates tab name:** `refactor-auth`

```bash
SCRIPT=$(mktemp /tmp/claude-tab-XXXXXX.sh)
cat > "$SCRIPT" << 'SCRIPT_EOF'
#!/bin/bash
cd '/home/danil/code/myproject'
PROMPT='Refactor the auth module: extract JWT validation into separate service, add refresh token rotation'
clear
echo "Launching claude with prompt: $PROMPT"
echo ""
exec claude --dangerously-skip-permissions "$PROMPT"
SCRIPT_EOF
chmod +x "$SCRIPT"

zellij action new-tab --name "refactor-auth" && \
sleep 0.3 && \
zellij action write-chars "bash '$SCRIPT'
"
```

## Dependencies

- **zellij** -- terminal multiplexer (must be running)
- **claude** -- Claude Code CLI (available in new tab's PATH)

## Errors

| Error | Cause | Solution |
|-------|-------|----------|
| `Not in zellij session` | Running outside zellij | Start zellij first |
| `claude: command not found` | Claude CLI not in PATH | Install Claude Code |
| Script not created | /tmp not writable | Check disk space |

## Important

- Skill works **only inside zellij session**
- Zellij spawns a fresh shell in new tab -- no env var inheritance issues
- Session is **interactive** (not -p print mode) -- remains a working chat
- Script in /tmp is self-contained -- works regardless of the new tab's shell (fish, bash, zsh)
- This skill does NOT handle pure issue development -- use `zellij-dev-tab` skill for that
