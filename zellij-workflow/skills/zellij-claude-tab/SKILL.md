---
name: zellij-claude-tab
description: |
  **UNIVERSAL TRIGGER**: EXECUTE/RUN/LAUNCH Claude session with instructions IN separate zellij TAB.

  Common patterns:
  - "execute/run/launch [task/plan] in new tab"
  - "start claude session in new tab with [instructions]"
  - "выполни/запусти [задачу] в новой вкладке zellij"

  **Execute Plan/Task**:
  - "run this plan in a new zellij tab"
  - "execute plan from docs/plans/... in separate tab"
  - "launch this task in new tab", "start in parallel tab"
  - "выполни план в отдельной вкладке"

  **Start Session**:
  - "open claude session in new tab"
  - "start new claude in zellij tab with these instructions"
  - "create tab and run claude with prompt"
  - "открой сессию claude в новой вкладке"

  **Delegate Work**:
  - "delegate this to a new tab"
  - "run this in background tab", "parallel session for this"
  - "send to new tab", "offload to separate tab"
  - "запусти в параллельной вкладке"

  TRIGGERS: run in new tab, execute in tab, launch in tab, new tab claude,
  claude session tab, zellij claude tab, parallel tab, delegate to tab,
  start session tab, run plan tab, execute plan tab, separate session,
  выполни в вкладке, запусти в вкладке, новая вкладка, сессия в вкладке,
  параллельная сессия, отдельная вкладка, делегируй в вкладку
allowed-tools: Bash
---

# Zellij Claude Tab Skill

Launch an interactive Claude Code session in a separate zellij tab with arbitrary instructions.
The session remains a working chat after processing the initial prompt.

## How It Works

1. Claude receives instructions to execute in a new tab
2. Generates a short tab name from context (e.g. `plan-audit`, `#123`, `refactor`)
3. Writes prompt to a temp file (avoids escaping issues)
4. Creates zellij tab and launches `claude` with the prompt
5. Temp file is deleted immediately after reading, before claude starts

## Execution Steps

### Step 1: Determine tab name

Auto-generate a short name (1-2 words, max 20 chars) from the instruction context:
- Has issue reference -> `#123`
- Has plan file -> `plan-audit`
- General task -> `refactor`, `fix-tests`, etc.
- Fallback -> `claude-<HH:MM>` (e.g. `claude-14:35`)

### Step 2: Write prompt to temp file

```bash
PROMPT_FILE=$(mktemp /tmp/claude-tab-XXXXXX.md)
cat > "$PROMPT_FILE" << 'PROMPT_EOF'
<instructions here - the full prompt for the new session>
PROMPT_EOF
```

### Step 3: Create tab and launch claude

**In a new tab:**

```bash
TAB_NAME="<auto-generated>"
PROJECT_DIR=$(pwd)

# EAFP: execute directly, diagnose on failure
zellij action new-tab --name "$TAB_NAME" && \
zellij action write-chars "cd '$PROJECT_DIR' && PROMPT=\$(cat '$PROMPT_FILE') && rm '$PROMPT_FILE' && claude --dangerously-skip-permissions \"\$PROMPT\"
" || {
  echo "Command failed. Diagnosing..."
  if [ -z "$ZELLIJ" ]; then echo "Not in zellij session"
  elif ! command -v claude &>/dev/null; then echo "claude not found in PATH"
  else echo "Unknown error"
  fi
}
```

**In a new pane (alternative):**

```bash
zellij run -- bash -c "cd '$PROJECT_DIR' && PROMPT=\$(cat '$PROMPT_FILE') && rm '$PROMPT_FILE' && claude --dangerously-skip-permissions \"\$PROMPT\""
```

**How it works:**
1. `new-tab --name` -- creates tab with given name
2. `write-chars` -- types the command into the new tab's shell
3. Prompt is read into variable, temp file deleted immediately
4. `claude --dangerously-skip-permissions "$PROMPT"` -- starts **interactive** session with initial prompt, skipping permission prompts

## Examples

### Example 1: Execute a plan

**User:** "Execute the plan from docs/plans/skill-audit-plan.md in a new zellij tab"

**Claude writes to temp file:**
```
Execute the plan from docs/plans/2026-02-14-skill-audit-plan.md for issue #20.
Use superpowers:executing-plans.
```

**Claude runs:**
```bash
PROMPT_FILE=$(mktemp /tmp/claude-tab-XXXXXX.md)
cat > "$PROMPT_FILE" << 'PROMPT_EOF'
Execute the plan from docs/plans/2026-02-14-skill-audit-plan.md for issue #20. Use superpowers:executing-plans.
PROMPT_EOF
zellij action new-tab --name "plan-audit" && \
zellij action write-chars "cd '$(pwd)' && PROMPT=\$(cat '$PROMPT_FILE') && rm '$PROMPT_FILE' && claude --dangerously-skip-permissions \"\$PROMPT\"
"
```

### Example 2: Arbitrary task

**User:** "Run refactoring of the auth module in a separate tab"

**Claude generates tab name:** `refactor-auth`
**Prompt:** "Refactor the auth module: <details from conversation context>"

## Dependencies

- **zellij** -- terminal multiplexer (must be running)
- **claude** -- Claude Code CLI (available in new tab's PATH)

## Errors

| Error | Cause | Solution |
|-------|-------|----------|
| `Not in zellij session` | Running outside zellij | Start zellij first |
| `claude: command not found` | Claude CLI not in PATH | Install Claude Code |
| Temp file not created | /tmp not writable | Check disk space |

## Important

- Skill works **only inside zellij session**
- Zellij spawns a fresh shell in new tab -- no env var inheritance issues
- Session is **interactive** (not -p print mode) -- remains a working chat
- Temp file is removed immediately after reading, before claude starts
- This skill does NOT handle pure issue development -- use `zellij-dev-tab` skill for that
