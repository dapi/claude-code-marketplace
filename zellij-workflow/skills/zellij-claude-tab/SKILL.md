---
name: zellij-claude-tab
description: |
  **UNIVERSAL TRIGGER**: EXECUTE/RUN/LAUNCH Claude session with instructions IN separate zellij TAB.

  Common patterns:
  - "execute/run/launch [task/plan] in new tab"
  - "start claude session in new tab with [instructions]"
  - "выполни/запусти [задачу] в новой вкладке zellij"

  **Execute Plan/Task**:
  - "run this plan in a new zellij tab"
  - "execute plan from docs/plans/... in separate tab"
  - "launch this task in new tab", "start in parallel tab"
  - "выполни план в отдельной вкладке"

  **Start Session**:
  - "open claude session in new tab"
  - "start new claude in zellij tab with these instructions"
  - "create tab and run claude with prompt"
  - "открой сессию claude в новой вкладке"

  **Delegate Work**:
  - "delegate this to a new tab"
  - "run this in background tab", "parallel session for this"
  - "send to new tab", "offload to separate tab"
  - "запусти в параллельной вкладке"

  TRIGGERS: run in new tab, execute in tab, launch in tab, new tab claude,
  claude session tab, zellij claude tab, parallel tab, delegate to tab,
  start session tab, run plan tab, execute plan tab, separate session,
  выполни в вкладке, запусти в вкладке, новая вкладка, сессия в вкладке,
  параллельная сессия, отдельная вкладка, делегируй в вкладку
allowed-tools: Bash
---

# Zellij Claude Tab Skill

Launch an interactive Claude Code session in a separate zellij tab with arbitrary instructions.
The session remains a working chat after processing the initial prompt.

## MANDATORY CHECKS

**Claude MUST verify before executing:**

```bash
# 1. Check we are inside zellij
if [ -z "$ZELLIJ" ]; then
  echo "Error: not in a zellij session. Start zellij first."
  # DO NOT execute, warn user
fi

# 2. Check claude CLI is available
if ! command -v claude &>/dev/null; then
  echo "Error: claude not found in PATH. Install Claude Code CLI."
  # DO NOT execute, warn user
fi
```

**If any check fails** -- inform the user and DO NOT run `zellij action`.

## How It Works

1. Claude receives instructions to execute in a new tab
2. Generates a short tab name from context (e.g. `plan-audit`, `#123`, `refactor`)
3. Writes prompt to a temp file (avoids escaping issues)
4. Creates zellij tab and launches `claude` with the prompt
5. Temp file is deleted immediately after reading, before claude starts

## Execution Steps

### Step 1: Determine tab name

Auto-generate a short name (1-2 words, max 20 chars) from the instruction context:
- Has issue reference -> `#123`
- Has plan file -> `plan-audit`
- General task -> `refactor`, `fix-tests`, etc.
- Fallback -> `claude-<HH:MM>` (e.g. `claude-14:35`)

**Handle tab name collisions:**

```bash
# Check if tab with chosen name already exists, append suffix if needed
EXISTING=$(zellij action query-tab-names 2>/dev/null || true)
if echo "$EXISTING" | grep -qx "$TAB_NAME"; then
  N=2
  while echo "$EXISTING" | grep -qx "${TAB_NAME}-${N}"; do N=$((N+1)); done
  TAB_NAME="${TAB_NAME}-${N}"
fi
```

### Step 2: Write prompt to temp file

```bash
PROMPT_FILE=$(mktemp /tmp/claude-tab-XXXXXX.md)
cat > "$PROMPT_FILE" << 'PROMPT_EOF'
<instructions here - the full prompt for the new session>
PROMPT_EOF
```

### Step 3: Create tab and launch claude

```bash
TAB_NAME="<auto-generated>"
PROJECT_DIR=$(pwd)

zellij action go-to-tab-name --create "$TAB_NAME" && \
zellij action new-pane -- bash -c \
  "cd '$PROJECT_DIR' && PROMPT=\$(cat '$PROMPT_FILE') && rm '$PROMPT_FILE' && claude \"\$PROMPT\"" && \
zellij action focus-previous-pane && \
zellij action close-pane
```

**NOTE:** Single quotes around `$PROJECT_DIR` and `$PROMPT_FILE` inside the bash -c string prevent issues with spaces in paths.

**How it works:**
1. `go-to-tab-name --create` -- creates tab (or switches if exists)
2. `new-pane -- command` -- runs command in a new pane
3. Prompt is read into variable, temp file deleted immediately
4. `claude "$PROMPT"` -- starts **interactive** session with initial prompt
5. `focus-previous-pane` + `close-pane` -- removes empty shell pane

## Examples

### Example 1: Execute a plan

**User:** "Execute the plan from docs/plans/skill-audit-plan.md in a new zellij tab"

**Claude writes to temp file:**
```
Execute the plan from docs/plans/2026-02-14-skill-audit-plan.md for issue #20.
Use superpowers:executing-plans.
```

**Claude runs:**
```bash
PROMPT_FILE=$(mktemp /tmp/claude-tab-XXXXXX.md)
cat > "$PROMPT_FILE" << 'PROMPT_EOF'
Execute the plan from docs/plans/2026-02-14-skill-audit-plan.md for issue #20. Use superpowers:executing-plans.
PROMPT_EOF
zellij action go-to-tab-name --create "plan-audit" && \
zellij action new-pane -- bash -c "cd '$(pwd)' && PROMPT=\$(cat '$PROMPT_FILE') && rm '$PROMPT_FILE' && claude \"\$PROMPT\"" && \
zellij action focus-previous-pane && \
zellij action close-pane
```

### Example 2: Arbitrary task

**User:** "Run refactoring of the auth module in a separate tab"

**Claude generates tab name:** `refactor-auth`
**Prompt:** "Refactor the auth module: <details from conversation context>"

## Dependencies

- **zellij** -- terminal multiplexer (must be running)
- **claude** -- Claude Code CLI (available in new tab's PATH)

## Errors

| Error | Cause | Solution |
|-------|-------|----------|
| `Not in zellij session` | Running outside zellij | Start zellij first |
| `claude: command not found` | Claude CLI not in PATH | Install Claude Code |
| Temp file not created | /tmp not writable | Check disk space |

## Important

- Skill works **only inside zellij session**
- Zellij spawns a fresh shell in new tab -- no env var inheritance issues
- Session is **interactive** (not -p print mode) -- remains a working chat
- Temp file is removed immediately after reading, before claude starts
- This skill does NOT handle pure issue development -- use `zellij-dev-tab` skill for that
