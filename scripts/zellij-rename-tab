#!/usr/bin/env bash
#
# zellij-rename-tab - Rename zellij tab by pane_id
#
# Usage: zellij-rename-tab <pane_id> <title>
#
# Requires zellij-tab-rename plugin to be installed and loaded.
# See: zellij-tab-rename/README.md

set -euo pipefail

if [[ $# -lt 2 ]]; then
    echo "Usage: zellij-rename-tab <pane_id> <title>" >&2
    exit 1
fi

PANE_ID="$1"
TITLE="$2"

# Exit early if not in zellij
if [[ -z "${ZELLIJ:-}" ]]; then
    exit 0
fi

zellij pipe --name tab-rename -- "{\"pane_id\": \"$PANE_ID\", \"name\": \"$TITLE\"}"
